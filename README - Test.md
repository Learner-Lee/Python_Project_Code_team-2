# iFish - 智能打字演示器

所需要的包：

```
ttkbootstrap
tk
pynput
python-dateutil
```

运行：

```
python test_typewriter.py
```



## 测试类 —— test_typewriter.py

## 🧪 项目概述

本项目包含一个模拟打字机（TypeWriter）的核心逻辑，并配套实现了：

- 文件读取与字符流控制
- 键盘输入监控与打字速度计算
- 测试数据持久化管理
- GUI 交互逻辑（未实际启动）
- 全面的自动化测试套件（`test_typewriter.py`）

所有功能均通过 **Python 单元测试** 进行验证，确保系统稳定性与可靠性。

------

## 📦 主要模块

| 模块                  | 功能                                             |
| --------------------- | ------------------------------------------------ |
| `typewriter.py`       | 核心打字机逻辑：加载文件、逐字符输出、重置状态   |
| `keyboard_monitor.py` | 监控键盘按键，实时计算打字速度（字/分钟）        |
| `data_manager.py`     | 管理测试记录的保存、查询与清除，支持 JSON 持久化 |
| `utils.py`            | 工具函数，如自动检测文件编码（UTF-8 / GBK 等）   |
| `ui.py`（隐含）       | GUI 应用逻辑（在测试中通过 Mock 验证）           |
| `test_typewriter.py`  | **完整自动化测试套件**，覆盖功能、异常、性能     |

------

## ⚙️ 依赖项

- Python 3.7+
- 标准库：`unittest`, `tempfile`, `json`, `os`, `time`, `tkinter`
- （无第三方依赖）

> 注：GUI 功能基于 `tkinter`，但测试中不实际创建窗口，仅验证逻辑。

------

## ▶️ 如何运行测试

克隆或下载项目后，在终端执行：

```
python test_typewriter.py
```

你将看到类似如下输出：

```
============================================================
TypeWriter 自动化测试开始
============================================================

1. 运行功能测试...
test_complete_workflow (__main__.TestTypeWriterSystem) ... ✓ 文件打开测试通过
✓ 字符读取测试通过
...

2. 运行性能基准测试...
 1KB文件加载时间: 0.002秒
 5KB文件加载时间: 0.008秒
 ...

✅ 所有测试通过!
🎉 所有测试完成且通过!
```

测试内容包括：

- 完整工作流程（文件加载 → 打字模拟 → 数据保存）
- 编码自动识别（UTF-8 / GBK / 无效二进制）
- 大文件处理性能（10KB 级别）
- 数据持久化与损坏恢复
- 打字速度计算准确性
- GUI 逻辑 Mock 验证

------

## 🧪 测试覆盖亮点

- ✅ **端到端集成测试**：模拟真实用户操作流
- ✅ **异常处理**：损坏 JSON 文件自动恢复
- ✅ **多编码支持**：中文（GBK）与英文（UTF-8）兼容
- ✅ **性能基准**：文件加载与字符读取效率验证
- ✅ **线程安全模拟**：键盘监控计时与回调机制

------

## 🗂️ 推荐项目结构

```
typewriter-project/
├── typewriter.py
├── keyboard_monitor.py
├── data_manager.py
├── utils.py
├── ui.py           
├── main.py  
├── test_typewriter.py    # 测试文件
├── requirements.txt
└── README.md             
```

------

## 🙌 贡献与扩展

欢迎提交 Issue 或 PR！你可以：

- 添加更多编码格式支持
- 集成真实键盘监听（如 `pynput`）
- 实现历史数据可视化
- 增加打字错误率统计

------

